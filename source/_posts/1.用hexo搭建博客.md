title: Hexo+GitHub pages搭建个人博客
date: 2021-1-25

---



**Hexo简介**

Hexo是一款基于Node.js的静态博客框架，依赖少易于安装使用，可以方便的生成静态网页托管在GitHub和Coding上，是搭建博客的首选框架。大家可以进入[hexo官网](https://hexo.io/zh-cn/)进行详细查看，因为Hexo的创建者是台湾人，对中文的支持很友好，可以选择中文进行查看。

教程分四部分，

- 第一部分：hexo的初级搭建还有部署到GitHub page上，以及个人域名的绑定。
- 第二部分：hexo的基本配置，更换主题，实现多终端工作，以及才coding page部署实现国内外分流
- 第三部分：hexo添加各种功能，包括搜索的SEO，阅读量统计，访问量统计和评论系统等。
- 第四部分：hexo常用命令

## 第一部分

**Hexo搭建步骤**

1. 安装Git

2. 安装Node.js

3. 安装Hexo

4. GitHub创建个人仓库

5. 生成SSH添加到GitHub

6. 将hexo部署到GitHub

7. 设置个人域名

8. 发布文章

### 1. 安装Git

廖雪峰的[Git教程](https://www.liaoxuefeng.com/wiki/896043488029600)

### 2. 安装nodeJS

Hexo是基于nodeJS编写的，所以需要安装nodeJS和里面的npm工具。

查看安装结果：

```
node -v
npm -v
```

### 3. 安装hexo

创建一个文件夹myblog，然后cd到这个文件夹下（或者在这个文件夹下直接右键git bash打开，或者在路径框输入cmd回车）。

输入命令

`npm install -g hexo-cli`

依旧用`hexo -v`查看版本

至此就全部安装完了。

接下来初始化hexo

```
hexo init myblog
```

然后安装依赖

```
cd myblog
npm install
```

install完成后，指定文件夹目录下有：

node_modules：依赖包

public：存放生成的页面

scaffolds：生成文章的一些模板

source：用来存放文章

themes：主题

_config.yml：配置文件

启动：

```
hexo g
hexo server
```

在浏览器输入localhost:4000就可以看到博客了。

使用`ctrl+c`可以把服务关掉。

### 4. GitHub创建个人仓库

创建一个和用户名相同的仓库，后面加.github.io，也就是xxx.github.io，其中xxx就是GitHub用户名。

### 5. 生成SSH添加到GitHub

```
git config --global user.name "yourname"
git config --global user.email "youremail"
```

这里输入的是GitHub的用户名和邮箱，可以用下面的命令检查是否输入正确：

```
git config user.name
git config user.email
```

然后创建SSH，一路回车

```
ssh-keygen -t rsa -C "youremail"
```



这个时候回告诉我们生成的.ssh文件夹地址，其中id_rsa是这台电脑的私人秘钥，id_rsa.pub是公共秘钥。

把公钥放在GitHub上，这样当链接GitHub账户时，它会根据公钥匹配私钥，当能够相互匹配时，才能够顺利通过git上传文件到GitHub。



在GitHub的setting中，找到SSH keys的设置选项，点击`New SSH key`，把id_rsa.pub里面的信息复制进去。

查看是否成功：

```
ssh -T git@github.com
```

### 6. 将hexo部署到GitHub

打开配置文件<font color="red">_config.yml</font>，翻到最后，修改repo，YourgithubName就是GitHub账户。

```
deploy:
  type: git
  repo: https://github.com/YourgithubName/YourgithubName.github.io.git
  branch: master
```

这个时候需要新安装deploy-git，这样才能用命令将hexo部署到GitHub。

```
npm install hexo-deployer-git --save
```

然后

```
hexo clean
hexo generate
hexo deploy
```

deploy时有可能要输入username和password。

### 7. 设置个人域名

在[阿里云](https://wanwang.aliyun.com/)上买一个域名，。。。

登录GitHub，进入之前创建的仓库，点击settings，设置Custom domain，输入域名xxx。

然后再博客文件source中创建一个名为CNAME的文件，不要后缀，写上域名。

最后，在命令行中，输入

```
hexo clean
hexo g
hexo d
```

就可以了。



##  第二部分

### 1. hexo基本配置

在文件根目录下的<font color="red">_config.yml</font>，就是整个hexo框架的配置文件。可以在这里修改大部分的配置，详细可参考[官方配](https://hexo.io/zh-cn/docs/configuration)置描述。

**网站**

|    参数     |                             描述                             |
| :---------: | :----------------------------------------------------------: |
|    title    |                           网站标题                           |
|  subtitle   |                          网站副标题                          |
| description |                           网站描述                           |
|   author    |                           您的名字                           |
|  language   |                       网站使用的语言。                       |
|  timezone   | 网站时区。Hexo 默认使用您电脑的时区。请参考 [时区列表](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones) 进行设置，如 `America/New_York`, `Japan`, 和 `UTC` 。一般的，对于中国大陆地区可以使用 `Asia/Shanghai`。 |

其中，`description`主要用于SEO，告诉搜索引擎一个关于您站点的简单描述，通常建议在其中包含您网站的关键词。`author`参数用于主题显示文章的作者。

**网址**

|        参数        |                             描述                             |          默认值           |
| :----------------: | :----------------------------------------------------------: | :-----------------------: |
|        url         |                             网址                             |                           |
|        root        |                          网站根目录                          |                           |
|     permalink      | 文章的 [永久链接](https://hexo.io/zh-cn/docs/permalinks) 格式 | :year/:month/:day/:title/ |
| permalink_defaults |                   永久链接中各部分的默认值                   |                           |
|    pretty_urls     | 改写 [`permalink`](https://hexo.io/zh-cn/docs/variables) 的值来美化 URL |                           |

在这里，你需要把`url`改成你的网站域名。

permalink，也就是你生成某个文章时的那个链接格式。

比如我新建一个文章叫`temp.md`，那么这个时候他自动生成的地址就是`http://yoursite.com/2018/09/05/temp`。

以下是官方给出的示例，关于链接的变量还有很多，需要的可以去官网上查找 [永久链接](https://hexo.io/zh-cn/docs/permalinks) 。



**主题**

```
theme: landscape
```

<font color="red">theme</font>就是选择什么主题，也就是在<font color="red">theme</font>这个文件夹下，在官网上有很多个主题，默认给你安装的是<font color='red'>lanscape</font>这个主题。当你需要更换主题时，在官网上下载，把主题的文件放在<font color="red">theme</font>文件夹下，再修改这个参数就可以了。

**部署**

```
deploy:
  type: git
  repo: <repository url>
  branch: [branch]
```

<font color='red'>deploy</font>是配置网站部署的，<font color='red'>repo</font>就是GitHub的仓库，<font color='red'>branch</font>选择仓库的哪个分支。

**Front-matter**

注意：这个不是在_config.yml中配置的，而是在文章最上方。

Front-matter是文件最上方以<font color='red'>`---`</font>分隔的区域，用于指定个别文件的变量。

一些预定义参数：

|   参数   |        描述        |
| :------: | :----------------: |
|  title   |        标题        |
|   date   |      建立日期      |
| updated  |      更新日期      |
| comments | 开启文章的评论功能 |



**layout（布局）**

当你每一次使用代码

```
hexo new paper
```

它其实默认使用的是<font color='red'>post</font>这个布局，也就是<font color='red'>source</font>文件夹下的<font color='red'>_post</font>里面。

Hexo 有三种默认布局：`post`、`page` 和 `draft`，它们分别对应不同的路径，而您自定义的其他布局和 `post` 相同，都将储存到 `source/_posts` 文件夹。

| 布局  |      路径      |
| :---: | :------------: |
| post  | source/_posts  |
| page  |     source     |
| draft | source/_drafts |

而new这个命令其实是：

```
hexo new [layout] <title>
```

只不过这个layout默认是post。



**page**

如果你想另起一页，name可以用

```
hexo new page board
```

系统会自动给你在source文件下创建一个board文件夹，以及board文件夹中的index.md，这样你访问的board对应的链接就是<font color='red'>http://xxx.xxx/board</font>



**draft**

draft是草稿的意思，也就是你如果想写文章，又不希望被看到，name可以

```
hexo new draft newpage
```

这样会在source/_draft中新建一个newpage.md文件，如果你的草稿文件写的过程中，想要预览一下，那么可以使用

```
hexo server --draft
```

在本地端口中开启服务预览。

如果你的草稿文件写完了，想要发表到post中，

```
hexo publish draft newpage
```

就会自动把newpage.md发送到post中。



### 2. 更换主题 ###

如果觉得默认的<font lolor='red'>landscape</font>主题不好看，name可以在[官网](https://hexo.io/themes/)中选择喜欢的主题进行修改。

其中最受欢迎的是next主题。

直接在github链接上下载下来，然后放到`theme`文件夹下就行了，然后再在刚才说的配置文件中把`theme`换成那个主题文件夹的名字，它就会自动在`theme`文件夹中搜索你配置的主题。

而后进入<font color='red'>next</font>主题的文件夹，可以看到里面也有一个配置文件`_config.xml`，貌似它默认是`_config.xml.example`，把它复制一份，重命名为`_config.xml`就可以了。这个配置文件是修改你整个主题的配置文件。



**schemes**

在next的配置文件_config.xml中有的Schemes提供了4个scheme（样式），我们可以选择自己喜欢的样式。

```
# Schemes
scheme: Muse
#scheme: Mist
#scheme: Pisces
#scheme: Gemini
```

### 3. 主题优化 ###

#### 3.1 菜单

修改左边菜单栏语言为中文：

在站点配置文件的<font color='red'>_config.yml</font>中修改<font color='red'>lanauge</font>为next主题的中文<font color='red'>zh-CN</font>

```
# Site
title: Hexo
subtitle: ''
description: ''
keywords:
author: John Doe
language: zh-CN
timezone: ''
```



#### 3.2 头像

在主题配置文件中搜索avatar字段：

```
avatar:
  # Replace the default image and set the url here.
  url: /images/avatar.jpg
  # If true, the avatar will be dispalyed in circle.
  rounded: false
  # If true, the avatar will be rotated with the cursor.
  rotated: false
```

方法一：url的地址用网络图片的地址

方法二：将头像放到source/images目录下，设置为url:/images/avatar.jpg



#### 3.3 作者昵称与站点描述

博客配置文件中的Site

```
# Site
title: Hexo
subtitle: ''
description: ''
keywords:
author: John Doe
language: zh-CN
timezone: ''
```

修改其中的author和description。



### 4. 添加RSS



### 5. 添加搜索

**插件原理**

这个插件会扫描博客文章，根据<font color='red'>_config.yml</font>的配置从文章里获取内容生成一个xml/json文件的结果，类似于博客文章信息的摘要，搜索的时候就搜索这个文件的内容。

**安装插件**

```
npm install hexo-generator-searchdb --save
```

**配置**

在博客配置文件中钟添加以下内容。

```
search:
  path: search.xml
  field: post
  content: true
  format: html
```

在主题配置文件中找到<font color='red'>local_search</font>，修改`enable`的值为true。



### 6. git分支进行多终端工作

问题来了，如果你现在在自己的笔记本上写的博客，部署在了网站上，那么你在家里用台式机，或者实验室的台式机，发现你电脑里面没有博客的文件，或者要换电脑了，最后不知道怎么移动文件，怎么办？

在这里我们就可以利用git的分支系统进行多终端工作了，这样每次打开不一样的电脑，只需要进行简单的配置和在github上把文件同步下来，就可以无缝操作了。





























